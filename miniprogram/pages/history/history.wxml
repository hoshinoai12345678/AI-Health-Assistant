<!--pages/history/history.wxml-->
<view class="container">
  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{conversations.length === 0}}" class="empty">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">æš‚æ— å¯¹è¯è®°å½•</text>
    <button class="start-btn" bindtap="goToChat">å¼€å§‹å¯¹è¯</button>
  </view>

  <!-- å¯¹è¯åˆ—è¡¨ -->
  <view wx:else class="conversation-list">
    <view 
      wx:for="{{conversations}}" 
      wx:key="id" 
      class="conversation-item"
      bindtap="openConversation"
      data-id="{{item.id}}"
    >
      <view class="conversation-content">
        <view class="conversation-title">{{item.title}}</view>
        <view class="conversation-message">{{item.lastMessage}}</view>
        <view class="conversation-time">{{item.time}}</view>
      </view>
      <view 
        class="delete-btn" 
        catchtap="deleteConversation"
        data-id="{{item.id}}"
      >
        ğŸ—‘ï¸
      </view>
    </view>
  </view>
</view>
